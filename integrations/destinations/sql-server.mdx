---
title: "Sink data from RisingWave to SQL Server"
sidebarTitle: Microsoft SQL Server
description: This guide describes how to sink data from RisingWave to Microsoft SQL Server.
---

This guide covers two connector options for sinking data to SQL Server:
- **JDBC connector** (`connector='jdbc'`) - Recommended for better performance
- **SQL Server native connector** (`connector='sqlserver'`) - Legacy option

You can test out this process on your own device by using the `sqlserver_sink.slt` demo in the [e2e\_test directory](https://github.com/risingwavelabs/risingwave/tree/main/e2e%5Ftest/sink) of the RisingWave repository.

<Tip>
**PREMIUM FEATURE**

This is a premium feature. For a comprehensive overview of all premium features and their usage, please see [RisingWave premium features](/get-started/premium-features).
</Tip>

## Prerequisites

Before sinking data from RisingWave to SQL Server, please ensure the following:

* The SQL Server table you want to sink to is accessible from RisingWave.
* You have an upstream materialized view or table in RisingWave that you can sink data from.

### Notes about running RisingWave from binaries

If you are running RisingWave locally from binaries and intend to use the JDBC sink connector, make sure you have [JDK 11](https://openjdk.org/projects/jdk/11/) or later versions installed in your environment.

## Create a sink

RisingWave supports two connector types for SQL Server sinks. The JDBC connector is recommended for better performance.

### Syntax

```sql
CREATE SINK [ IF NOT EXISTS ] sink_name
[FROM sink_from | AS select_query]
WITH (
   connector='jdbc' | 'sqlserver',
   connector_parameter = 'value', ...
);
```

### Parameters (JDBC connector)

<Note>
The JDBC connector (`connector='jdbc'`) offers better performance compared to the native SQL Server connector.
</Note>

| Parameter Names     | Description                                                                                                                        |
| :------------------ | :--------------------------------------------------------------------------------------------------------------------------------- |
| connector           | **Required**. Sink connector type. Use `jdbc` for the JDBC connector.                                                              |
| jdbc.url            | **Required**. The JDBC URL of the SQL Server database. Format: `jdbc:sqlserver://<host>:<port>;databaseName=<database>;user=<username>;password=<password>;trustServerCertificate=true` |
| table.name          | **Required**. The SQL Server table you want to sink to.                                                                            |
| schema.name         | **Optional**. The SQL Server schema name. If not specified, the default schema will be used.                                      |
| type                | **Required**. Allowed values: `append-only` and `upsert`.                                                                         |
| force\_append\_only | **Optional**. If true, forces the sink to be append-only, even if it cannot be.                                                   |
| primary\_key        | **Conditional**. The primary keys of the sink. Use ',' to delimit the primary key columns. Primary keys are required for upsert sinks. |
| jdbc.query.timeout  | **Optional**. Specifies the timeout for the operations to downstream. If not set, the default is 60s.                             |
| jdbc.auto.commit    | **Optional**. Controls whether to automatically commit transactions for JDBC sink. If not set, the default is false.              |

### Parameters (SQL Server native connector)

| Parameter Names     | Description                                                                                                                        |
| :------------------ | :--------------------------------------------------------------------------------------------------------------------------------- |
| connector           | **Required**. Sink connector type. Use `sqlserver` for the native SQL Server connector.                                           |
| type                | **Required**. Allowed values: `append-only` and `upsert`.                                                                         |
| force\_append\_only | **Optional**. If true, forces the sink to be append-only, even if it cannot be.                                                   |
| primary\_key        | **Conditional**. The primary keys of the sink. Use ',' to delimit the primary key columns. Primary keys are required for upsert sinks. |
| sqlserver.host      | **Required**. The SQL Server host.                                                                                                 |
| sqlserver.port      | **Required**. The SQL Server port.                                                                                                 |
| sqlserver.user      | **Required**. The user for SQL Server access.                                                                                      |
| sqlserver.password  | **Required**. The password for SQL Server access.                                                                                  |
| sqlserver.database  | **Required**. The SQL Server database you want to sink to.                                                                         |
| sqlserver.table     | **Required**. The SQL Server table you want to sink to.                                                                            |

## Examples

### Example: JDBC connector (recommended)

The following example demonstrates how to create a SQL Server sink using the JDBC connector. The JDBC connector offers better performance.

```sql Example: JDBC connector
-- Create a table in RisingWave
CREATE TABLE t_many_data_type_rw (
  k1 integer,
  k2 varchar,
  -- other columns
);

-- Create a sink to SQL Server using JDBC
CREATE SINK s_many_data_type FROM t_many_data_type_rw WITH (
  connector = 'jdbc',
  type = 'upsert',
  jdbc.url='jdbc:sqlserver://sqlserver-server:1433;databaseName=SinkTest;user=SA;password=YourPassword;trustServerCertificate=true',
  primary_key = 'k1,k2',
  schema.name='test_schema',
  table.name = 't_many_data_type'
);
```

<Note>
**Security Best Practice**: Replace the connection parameters in `jdbc.url` with your actual SQL Server host, port, database name, username, and password. For production environments, avoid hardcoding credentials directly in the JDBC URL. Instead, use environment variables, secret management systems, or RisingWave's [secret management](/operate/manage-secrets) feature to securely store and reference credentials.
</Note>

### Example: SQL Server native connector

The following example demonstrates how to create a SQL Server sink using the native SQL Server connector.

```sql Example: Native connector
-- Create a table in RisingWave
CREATE TABLE t_data (
  id integer,
  name varchar
);

-- Create a sink to SQL Server using native connector
CREATE SINK s_data FROM t_data WITH (
  connector = 'sqlserver',
  type = 'upsert',
  sqlserver.host = 'sqlserver-server',
  sqlserver.port = 1433,
  sqlserver.user = 'SA',
  sqlserver.password = 'YourPassword',
  sqlserver.database = 'SinkTest',
  sqlserver.table = 't_data',
  primary_key = 'id'
);
```

## Data type mapping

The following table shows the corresponding data types between RisingWave and SQL Server that should be specified when creating a sink. For details on native RisingWave data types, see [Overview of data types](/sql/data-types/overview).

| SQL Server type | RisingWave type             |
| :-------------- | :-------------------------- |
| bit             | boolean                     |
| smallint        | smallint                    |
| int             | integer                     |
| bigint          | bigint                      |
| float(24)       | real                        |
| float(53)       | double                      |
| decimal         | decimal                     |
| date            | date                        |
| nvarchar        | varchar                     |
| time            | time                        |
| datetime2       | time without time zone      |
| bigint          | timestamp without time zone |
| No support      | interval                    |
| No support      | struct                      |
| No support      | array                       |
| varbinary       | bytea                       |
| No support      | jsonb                       |
| No support      | serial                      |
