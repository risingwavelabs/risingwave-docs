---
title: "Iceberg compaction"
sidebarTitle: Compaction
description: "Learn how RisingWave supports Iceberg compaction for sinks and table engines."
---

When RisingWave streams data into Iceberg, the process can generate many small data files and delete files. These files accumulate over time, increasing storage overhead and slowing down query performance.

## Periodic compaction

Iceberg compaction for sinks and table engines periodically merges small data files and delete files into larger, optimized data files. These operations run in the background at user-defined intervals, ensuring efficient storage management with minimal disruption.

To configure Iceberg compaction when creating a sink or table, specify the following parameters in the `WITH` clause:

| Parameter                  | Description                                                                 |
|:---------------------------|:----------------------------------------------------------------------------|
| `enable_compaction`        | Whether to enable Iceberg compaction (`true`/`false`).                       |
| `compaction_interval_sec`  | Interval (in seconds) between two compaction runs. Defaults to `3600` seconds. |

For detailed syntax, parameters, and configuration details, see [Compaction for Iceberg sink](/iceberg/deliver-to-iceberg#compaction-for-iceberg-sink) and [Compaction for Iceberg table engine](/iceberg/create-manage-native-iceberg-tables#compaction-for-native-iceberg-tables).

## Manual compaction

In addition to periodic background compaction, you can also trigger compaction manually.  

By running the [`VACUUM FULL`](/sql/commands/sql-vacuum) command, RisingWave will compact small files and simultaneously expire old snapshots. This gives you finer control over storage cleanup and is useful when you want to immediately reduce storage overhead or reset snapshot history.



